<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Valentine â¤ï¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            /* ë“œë˜ê·¸ ë°©ì§€ */
        }

        body {
            font-family: 'Jua', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            background-color: #ffdde1;
            background-image: linear-gradient(0deg, #ffdde1 0%, #ee9ca7 100%);
            height: 100vh;
            height: 100dvh;
            /* ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ ëŒ€ì‘ */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 90%;
            max-width: 400px;
            position: relative;
            transition: transform 0.3s ease;
            z-index: 10;
            /* í­ì£½ë³´ë‹¤ ìœ„ì— ì˜¤ê²Œ ì„¤ì • */
            min-height: 400px;
            /* ë‚´ìš©ì´ ë°”ë€Œì–´ë„ í¬ê¸° ìœ ì§€ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            color: #ff4b6e;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            word-break: keep-all;
            /* ëª¨ë°”ì¼ì—ì„œ ê¸€ìê°€ ì´ìƒí•˜ê²Œ ëŠê¸°ëŠ” ê²ƒ ë°©ì§€ */
        }

        .question-text {
            font-size: 1.4rem;
            color: #333;
            margin-bottom: 2rem;
            line-height: 1.4;
            word-break: keep-all;
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        button {
            background-color: #ff6b81;
            color: white;
            border: none;
            padding: 15px 20px;
            /* í„°ì¹˜ ì˜ì—­ í™•ë³´ë¥¼ ìœ„í•´ ì¡°ê¸ˆ í‚¤ì›€ */
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Jua', sans-serif;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(255, 107, 129, 0.2);
            touch-action: manipulation;
            /* ë”ë¸”íƒ­ ì¤Œ ë°©ì§€ */
            -webkit-tap-highlight-color: transparent;
            /* í„°ì¹˜ ì‹œ íŒŒë€ ë°•ìŠ¤ ì œê±° */
        }

        button:hover {
            background-color: #ff4757;
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.95);
        }

        /* í‹€ë ¸ì„ ë•Œ ì• ë‹ˆë©”ì´ì…˜ */
        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-10px);
            }

            50% {
                transform: translateX(10px);
            }

            75% {
                transform: translateX(-10px);
            }

            100% {
                transform: translateX(0);
            }
        }

        /* ë§ˆì§€ë§‰ ê³ ë°± í™”ë©´ ìŠ¤íƒ€ì¼ */
        .proposal-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 2rem;
            position: relative;
            height: 60px;
            /* ë²„íŠ¼ì´ ì›€ì§ì¼ ê³µê°„ í™•ë³´ */
        }

        #no-btn {
            background-color: #a4b0be;
            position: absolute;
            /* ì ˆëŒ€ ìœ„ì¹˜ë¡œ ë³€ê²½í•˜ì—¬ ì›€ì§ì„ êµ¬í˜„ */
            right: 20px;
            /* ì´ˆê¸° ìœ„ì¹˜ */
            transition: all 0.2s ease;
            /* ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„ */
        }

        #yes-btn {
            background-color: #ff4757;
            position: absolute;
            left: 20px;
            /* ì´ˆê¸° ìœ„ì¹˜ */
            z-index: 10;
        }

        .heart-bg {
            position: absolute;
            font-size: 2rem;
            color: rgba(255, 182, 193, 0.5);
            z-index: -1;
            animation: float 6s linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(-20vh) rotate(360deg);
                opacity: 0;
            }
        }

        .result-message {
            font-size: 1.5rem;
            color: #ff4757;
            margin-top: 1rem;
            display: none;
            /* ì²˜ìŒì—” ìˆ¨ê¹€ */
            position: relative;
            z-index: 100;
            font-weight: bold;
        }

        .result-message.show {
            display: block !important;
        }

        .proposal-img {
            width: 200px;
            height: auto;
            border-radius: 15px;
            margin-bottom: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>

<body>

    <!-- ë– ë‹¤ë‹ˆëŠ” í•˜íŠ¸ ë°°ê²½ -->
    <div id="hearts-container"></div>

    <div class="container" id="game-box">
        <h1 id="title">Happy Valentine's Day â¤ï¸</h1>
        <div id="quiz-content">
            <!-- Quiz context goes here -->
        </div>
    </div>

    <script>
        // ==========================================
        // ğŸ‘‡ ì—¬ê¸°ì„œë¶€í„° ë‚´ìš©ì„ ìˆ˜ì •í•˜ì‹œë©´ ë©ë‹ˆë‹¤! ğŸ‘‡
        // ==========================================

        const quizData = [
            {
                question: "When did we start dating? ğŸ—“ï¸",
                options: ["May 2nd", "June 2nd", "July 2nd", "June 12th"],
                correctIndex: 1
            }
        ];

        const finalProposalText = "Sohui, will you be my Valentine? ğŸŒ¹";
        const successMessage = "I knew it! Love you! â¤ï¸ğŸ¥°";

        // ==========================================
        // ğŸ‘† ìˆ˜ì • ë! ì—¬ê¸° ì•„ë˜ëŠ” ê±´ë“œë¦¬ì§€ ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤. ğŸ‘†
        // ==========================================

        let currentStep = 0;
        const gameBox = document.getElementById('game-box');
        const title = document.getElementById('title');
        const quizContent = document.getElementById('quiz-content');

        // ë°°ê²½ í•˜íŠ¸ ìƒì„±
        function createHearts() {
            const container = document.getElementById('hearts-container');
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('heart-bg');
                heart.innerHTML = 'â¤ï¸';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 3 + 3 + 's';
                heart.style.fontSize = Math.random() * 20 + 20 + 'px';
                container.appendChild(heart);

                setTimeout(() => {
                    heart.remove();
                }, 6000);
            }, 300);
        }

        createHearts();

        // í€´ì¦ˆ ë Œë”ë§ í•¨ìˆ˜
        function renderQuiz() {
            if (currentStep < quizData.length) {
                const data = quizData[currentStep];

                let optionsHtml = '';
                data.options.forEach((opt, index) => {
                    optionsHtml += `<button onclick="checkAnswer(${index})">${opt}</button>`;
                });

                quizContent.innerHTML = `
                    <div class="question-text">${data.question}</div>
                    <div class="options-grid">
                        ${optionsHtml}
                    </div>
                `;
            } else {
                showProposal();
            }
        }

        // ì •ë‹µ í™•ì¸ í•¨ìˆ˜
        function checkAnswer(selectedIndex) {
            const data = quizData[currentStep];
            if (selectedIndex === data.correctIndex) {
                // ì •ë‹µ!
                confetti({
                    particleCount: 50,
                    spread: 60,
                    origin: { y: 0.7 },
                    colors: ['#ff6b81', '#ff4757', '#ffffff']
                });
                currentStep++;
                renderQuiz();
            } else {
                // ì˜¤ë‹µ!
                gameBox.classList.add('shake');
                setTimeout(() => {
                    gameBox.classList.remove('shake');
                }, 500);
                alert("Nope! Try again ğŸ˜œ");
            }
        }

        // ê³ ë°± í™”ë©´ í‘œì‹œ í•¨ìˆ˜
        function showProposal() {
            title.innerText = "â¤ï¸ Last Question â¤ï¸";
            quizContent.innerHTML = `
                <img src="usagi.png" class="proposal-img" alt="Love Photo">
                <div class="question-text" style="font-size: 1.6rem; font-weight: bold;">${finalProposalText}</div>
                <div class="proposal-buttons">
                    <button id="yes-btn" onclick="acceptProposal()">Yes! ğŸ˜</button>
                    <button id="no-btn" onmouseover="moveButton()" ontouchstart="moveButton()" onclick="moveButton()">No ğŸ˜œ</button>
                </div>
                <div id="result-msg" class="result-message">${successMessage}</div>
            `;
        }

        // 'No' button runs away
        function moveButton() {
            const noBtn = document.getElementById('no-btn');

            // Get button size (default to estimations if not rendered yet)
            const btnWidth = noBtn.offsetWidth || 100;
            const btnHeight = noBtn.offsetHeight || 50;

            // Safe boundaries
            const maxX = window.innerWidth - btnWidth - 20;
            const maxY = window.innerHeight - btnHeight - 20;

            const randomX = Math.max(10, Math.random() * maxX);
            const randomY = Math.max(10, Math.random() * maxY);

            noBtn.style.position = 'fixed';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';

            // Critical fix: Remove conflicting constraints to prevent stretching
            noBtn.style.right = 'auto';
            noBtn.style.bottom = 'auto';
        }

        // ê³ ë°± ìˆ˜ë½!
        function acceptProposal() {
            // ë²„íŠ¼ ìˆ¨ê¸°ê¸°
            document.querySelector('.proposal-buttons').style.display = 'none';
            // ê²°ê³¼ ë©”ì‹œì§€ í‘œì‹œ
            const resultMsg = document.getElementById('result-msg');
            resultMsg.style.display = 'block';
            resultMsg.classList.add('show');

            // í­ì£½ íŒ¡íŒ¡!
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function random(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function () {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                // ì–‘ìª½ì—ì„œ í­ì£½ ë°œì‚¬
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        // ì´ˆê¸° ì‹¤í–‰
        renderQuiz();

    </script>
</body>

</html>